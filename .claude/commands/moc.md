---
description: テーマ別のMOC（索引）を生成・更新
argument-hint: "<theme> [--update]"
---

# /moc コマンド

あなたは「moc-builder」サブエージェントとして、指定されたテーマの MOC（Map of Content）を生成または更新します。

## 入力
- `$ARGUMENTS`: テーマ名（例: `decisions`, `risks`, `project-overview`）
- オプション: `--update` 既存MOCを更新する場合

## 処理手順

### Step 1: テーマを解釈する
テーマ名から、どのようなノートを集めるべきか判断してください:

| テーマ例 | 集めるノート |
|---------|-------------|
| decisions | 意思決定に関するノート（note-decision-*） |
| risks | リスクに関するノート（note-risk-*） |
| metrics | 指標に関するノート（note-metric-*） |
| open-questions | 未決事項（note-open-*） |
| project-overview | プロジェクト全体像（全カテゴリから主要なもの） |
| data-requirements | データ要件（note-data-*） |

### Step 2: 関連ノートを収集する
`knowledge/notes/` から、テーマに関連するノートを収集してください。

### Step 3: MOC構造を設計する
以下の構成要素を含めてください:

1. **概要説明**: このMOCで何が分かるか
2. **サマリーテーブル**: ノートの一覧表
3. **セクション分け**: 論理的なグループ化
4. **未決事項（Open Questions）**: 必ず含める
5. **関連リンク**: 他のMOCやprojectsへのリンク

### Step 4: MOCを生成する

テンプレート:
```markdown
# {テーマ}マップ

> **このMOCで分かること**: {1行で説明}

---

## サマリー

| # | 項目 | 概要 | ノート |
|---|------|------|--------|
| 1 | ... | ... | [[note-...]] |
| 2 | ... | ... | [[note-...]] |

---

## セクション1: {グループ名}

[[note-...]]

**何を決めたか / 何がリスクか / etc.**:
- ...

---

## セクション2: {グループ名}
...

---

## 未決事項（Open Questions）

| 項目 | 期限 | 担当 | ノート |
|------|------|------|--------|
| ... | ... | ... | [[note-open-...]] |

---

## 関連リンク

- [[map-...]]
- [[projects/...]]
```

### Step 5: 既存MOCとの整合性チェック
- `knowledge/maps/` に同名のMOCがあれば更新を提案
- 他のMOCに同じノートがリンクされていれば、相互リンクを追加

### Step 6: 出力
生成したMOCを表示し、ユーザーに確認を求めてください。

## 制約
- **リンクは最低8本**: 十分な網羅性を確保
- **未決事項セクション必須**: Open Questionsを必ず含める
- **入口として読みやすく**: 初めて見る人が全体像を把握できること

## 出力例

```
## /moc decisions 結果

### 生成したMOC

# 意思決定マップ

> **このMOCで分かること**: いつ、何を、なぜ決めたか

## サマリー
| # | 日付 | 決定事項 | ノート |
|---|------|---------|--------|
| 1 | 12/01 | 成功指標定義 | [[note-decision-success-metric]] |
...

### 保存先
`knowledge/maps/map-decisions.md` に保存してよいですか？
```
